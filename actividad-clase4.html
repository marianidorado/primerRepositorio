<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Actividad Clase 4</title>
<style>
body {
  font-family: Arial, sans-serif;
  background-color: #f4f6f8;
  margin: 0;
  padding: 0;
}

.container {
  max-width: 900px;
  margin: auto;
  background: white;
  padding: 30px;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

h1, h2 {
  color: #2c3e50;
}

h1 {
  text-align: center;
}

.section {
  margin-top: 30px;
}

label {
  font-weight: bold;
}

.line {
  border-bottom: 1px solid #ccc;
  margin: 8px 0 16px 0;
}

table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 10px;
}

th, td {
  border: 1px solid #ccc;
  padding: 8px;
  text-align: center;
}

th {
  background-color: #e9eef3;
}

.note {
  background: #eef7ff;
  padding: 15px;
  border-left: 4px solid #3498db;
  margin-top: 20px;
}

.footer {
  margin-top: 30px;
  padding: 15px;
  background: #f1f1f1;
  border-radius: 8px;
}
</style>
</head>
<body>

<div class="container">

<h1>ğŸŒ Actividad Clase 4</h1>
<h2>ComunicaciÃ³n entre Servicios + REST + Eventos + Service Discovery</h2>

<p><strong>Equipo:</strong> 2</p>
<p><strong>Proyecto:</strong> Tipo Rappi</p>

<div class="section">
<h2>ğŸªœ 1. Interacciones entre Servicios</h2>

<p><strong>InteracciÃ³n 1</strong></p>
<label>Servicio que envÃ­a:</label> <label style="color: red;">Servicio de Cliente (App/Web)</label>
<div class="line"></div>
<label>Servicio que recibe:</label><label style="color: red;">Servicio de Pedidos</label>
<div class="line"></div>
<label>InformaciÃ³n enviada:</label><label style="color: red;">Detalles del pedido (productos, direcciÃ³n, pago)</label>
<div class="line"></div>
<label>Â¿QuÃ© sucede si no responde?</label><label style="color: red;">El usuario verÃ¡ un mensaje de error tipo "No pudimos procesar tu orden" y la venta se pierde. Es el fallo mÃ¡s crÃ­tico porque detiene el flujo de ingresos.</label>
<div class="line"></div>

<p><strong>InteracciÃ³n 2</strong></p>
<label>Servicio que envÃ­a:</label> <label style="color: red;">Servicio de Pedidos</label>
<div class="line"></div>
<label>Servicio que recibe:</label><label style="color: red;">Servicio de Pagos</label>
<div class="line"></div>
<label>InformaciÃ³n enviada:</label><label style="color: red;">Monto total, ID del cliente y token del mÃ©todo de pago</label>
<div class="line"></div>
<label>Â¿QuÃ© sucede si no responde?</label><label style="color: red;">El pedido queda "en espera". El sistema no puede confirmar la compra y el restaurante no recibe la orden, dejando al cliente en un limbo transaccional.</label>
<div class="line"></div>

<p><strong>InteracciÃ³n 3</strong></p>
<label>Servicio que envÃ­a:</label> <label style="color: red;">Servicio de Pedidos</label>
<div class="line"></div>
<label>Servicio que recibe:</label><label style="color: red;">Servicio de Repartidores (LogÃ­stica)</label>
<div class="line"></div>
<label>InformaciÃ³n enviada:</label><label style="color: red;">UbicaciÃ³n del restaurante, destino de entrega y peso/volumen del pedido</label>
<div class="line"></div>
<label>Â¿QuÃ© sucede si no responde?</label><label style="color: red;">El pedido se prepara pero nadie pasa a recogerlo. La comida se enfrÃ­a y el cliente cancela por demora extrema en la asignaciÃ³n.</label>
<div class="line"></div>



</div>

<div class="section">
<h2>ğŸªœ 2. REST o Eventos</h2>

<table border="1" style="border-collapse: collapse; width: 100%; text-align: center;">
<tr style="background-color: #f2f2f2;">
<th>InteracciÃ³n</th>
<th>REST</th>
<th>Evento</th>
<th>Â¿Por quÃ©?</th>
</tr>
<tr>
<td><strong>1</strong></td>
<td style="color: red; font-weight: bold;">X</td>
<td></td>
<td style="color: red;">El cliente necesita una respuesta inmediata (OK/Error) para saber si su pedido fue recibido.</td>
</tr>
<tr>
<td><strong>2</strong></td>
<td style="color: red; font-weight: bold;">X</td>
<td></td>
<td style="color: red;">El pago debe validarse en tiempo real antes de avisar al restaurante; no podemos "esperar a ver si pasa".</td>
</tr>
<tr>
<td><strong>3</strong></td>
<td></td>
<td style="color: red; font-weight: bold;">X</td>
<td style="color: red;">Una vez pagado, lanzamos el evento "Pedido_Listo" para que los repartidores disponibles se enteren sin bloquear el flujo.</td>
</tr>
</table>
</div>

<div class="section">
<h2>ğŸªœ 3. SÃ­ncrono o AsÃ­ncrono</h2>

<table border="1" style="border-collapse: collapse; width: 100%; text-align: center;">
<tr style="background-color: #f2f2f2;">
<th>InteracciÃ³n</th>
<th>SÃ­ncrono</th>
<th>AsÃ­ncrono</th>
<th>JustificaciÃ³n</th>
</tr>
<tr>
<td><strong>1</strong></td>
<td style="color: red; font-weight: bold;">X</td>
<td></td>
<td style="color: red;">El cliente no puede cerrar la app sin saber si su pedido entrÃ³ al sistema correctamente.</td>
</tr>
<tr>
<td><strong>2</strong></td>
<td style="color: red; font-weight: bold;">X</td>
<td></td>
<td style="color: red;">Necesitamos confirmar el pago de inmediato para autorizar la preparaciÃ³n de la comida.</td>
</tr>
<tr>
<td><strong>3</strong></td>
<td></td>
<td style="color: red; font-weight: bold;">X</td>
<td style="color: red;">La bÃºsqueda de repartidores puede tomar tiempo; no bloqueamos el sistema mientras un repartidor acepta.</td>
</tr>
</table>
</div>

<div class="section">
<h2>ğŸªœ 4. Eventos Importantes del Sistema</h2>
1ï¸âƒ£ Este evento se dispara cuando el pago es exitoso. Avisa simultÃ¡neamente al Restaurante para que empiece a cocinar y al Servicio de FacturaciÃ³n para generar el recibo.<br>
2ï¸âƒ£ Se emite cuando un "Rappitendero" acepta el pedido. Notifica al Cliente (push notification) y le da al Restaurante la seÃ±al de que alguien ya viene en camino por la comida.<br>
3ï¸âƒ£ Es el evento final. Dispara el proceso de CalificaciÃ³n (encuesta), libera el pago retenido al repartidor y actualiza las estadÃ­sticas de ventas del comercio.
</div>

<div class="section">
<h2>ğŸªœ 5. AnÃ¡lisis de Fallos</h2>
<p><strong>Servicio mÃ¡s crÃ­tico:</strong> <label style="color: red; font-weight: bold;">Servicio de Pedidos (Order Service)</label></p>
<div class="line"></div>

<p><strong>Â¿QuÃ© pasarÃ­a si falla?</strong></p>
<label style="color: red;">La aplicaciÃ³n queda totalmente inutilizable para transacciones nuevas. Los usuarios no pueden ver el carrito, no pueden procesar pagos y los repartidores no reciben Ã³rdenes. Es un "apagÃ³n" comercial completo.</label>
<div class="line"></div>

<p><strong>Â¿El sistema debe detenerse o continuar?</strong></p>
<label style="color: red;">El sistema <strong>no</strong> debe detenerse por completo. DeberÃ­a entrar en "modo de solo lectura" (DegradaciÃ³n Graciosa), permitiendo que los usuarios vean pedidos que ya estÃ¡n en curso o su historial, pero bloqueando nuevas compras de forma controlada.</label>
<div class="line"></div>

<p><strong>Â¿CÃ³mo podrÃ­an manejar este fallo?</strong></p>
<label style="color: red;">Implementando un <strong>Circuit Breaker</strong> (Disyuntor) para evitar que el fallo se propague, usando rÃ©plicas del servicio en diferentes zonas y manteniendo una base de datos distribuida que permita recuperar la informaciÃ³n rÃ¡pidamente.</label>
<div class="line"></div>
</div>

<div class="section">
<h2>ğŸªœ 6. Service Discovery</h2>
<p><strong>Â¿QuÃ© problema ocurre si cambia la IP de un servicio?</strong></p>
<label style="color: red;">Se rompe la comunicaciÃ³n. Los demÃ¡s servicios intentarÃ­an llamar a una direcciÃ³n que ya no existe, causando errores de "ConexiÃ³n rechazada" (Timeout) y caÃ­das en cadena en la aplicaciÃ³n.</label>
<div class="line"></div>

<p><strong>Â¿CÃ³mo sabrÃ­a un servicio dÃ³nde encontrar otro?</strong></p>
<label style="color: red;">Consultando un <strong>Registro de Servicios</strong> (como Netflix Eureka o Consul). El servicio pregunta por nombre (ej: "Servicio-Pagos") y el registro le devuelve la IP actual operativa.</label>
<div class="line"></div>

<p><strong>Â¿Por quÃ© serÃ­a Ãºtil Service Discovery?</strong></p>
<label style="color: red;">Porque en una app tipo Rappi, durante la hora del almuerzo, el sistema crea automÃ¡ticamente 10 o 20 copias nuevas de cada servicio para aguantar el trÃ¡fico. El Discovery gestiona esas nuevas direcciones sin intervenciÃ³n humana.</label>
<div class="line"></div>

<p><strong>Â¿DÃ³nde lo aplicarÃ­an en su sistema?</strong></p>
<label style="color: red;">Lo aplicarÃ­amos entre el <strong>API Gateway</strong> y los microservicios internos (Pedidos, Pagos, Repartidores) para que el trÃ¡fico siempre llegue a una instancia que estÃ© "viva" y saludable.</label>
<div class="line"></div>
</div>

<div class="section">
<h2>ğŸªœ 7. Mini Diagrama</h2>
<p>Dibujen:</p>
<p><strong>Servicio A â†’ Service Discovery â†’ Servicio B</strong></p>
</div>

<div class="note">
ğŸ’¡ <strong>Ayuda rÃ¡pida</strong><br>
REST â†’ peticiÃ³n directa<br>
Evento â†’ algo ocurriÃ³<br>
SÃ­ncrono â†’ espera respuesta<br>
AsÃ­ncrono â†’ continÃºa sin esperar<br>
Service Discovery â†’ permite encontrar servicios automÃ¡ticamente
</div>

<div class="footer">
ğŸ¤ El equipo debe poder explicar:<br>
âœ” una interacciÃ³n importante<br>
âœ” un evento del sistema<br>
âœ” quÃ© pasa si un servicio falla<br>
âœ” dÃ³nde usarÃ­an Service Discovery
</div>

</div>
</body>
</html>
